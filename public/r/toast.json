{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "toast",
  "type": "registry:block",
  "title": "Toast",
  "description": "Beautiful toast notifications with stacking support, powered by Valtio and Framer Motion. Features 6 position options, promise handling, custom actions, and smooth animations.",
  "dependencies": [
    "valtio",
    "framer-motion",
    "lucide-react",
    "class-variance-authority"
  ],
  "files": [
    {
      "path": "registry/shadcn/lib/toast/store.ts",
      "content": "import { proxy } from \"valtio\"\n\nexport type ToastType = \"default\" | \"success\" | \"error\" | \"info\" | \"warning\" | \"loading\"\n\nexport type ToastPosition =\n    | \"top-left\"\n    | \"top-center\"\n    | \"top-right\"\n    | \"bottom-left\"\n    | \"bottom-center\"\n    | \"bottom-right\"\n\nexport type Toast = {\n    id: string\n    title?: string\n    description?: string\n    type?: ToastType\n    duration?: number\n    promise?: boolean\n    onAutoClose?: () => void\n    dismissible?: boolean\n    icon?: React.ReactNode\n    position?: ToastPosition\n}\n\nexport type ToastPromiseData = {\n    loading: string | { title: string; description?: string }\n    success: string | { title: string; description?: string } | ((data: unknown) => string | { title: string; description?: string })\n    error: string | { title: string; description?: string } | ((error: unknown) => string | { title: string; description?: string })\n}\n\nconst state = proxy({\n    toasts: [] as Toast[],\n    position: \"bottom-right\" as ToastPosition,\n    maxToasts: 3,\n    defaultDuration: 4000,\n})\n\nexport const MAX_TOASTS = 3\nexport const DEFAULT_DURATION = 4000\nconst timeouts = new Map<string, NodeJS.Timeout>()\nconst remainingTimes = new Map<string, number>()\nconst startTimes = new Map<string, number>()\n\nlet toastCount = 0\nconst genId = () => (++toastCount % Number.MAX_SAFE_INTEGER).toString()\n\nexport const setPosition = (position: ToastPosition) => state.position = position\n\nexport const setMaxToasts = (max: number) => state.maxToasts = max\n\nexport const setDefaultDuration = (duration: number) => state.defaultDuration = duration\n\nconst clearToastTimer = (id: string) => {\n    const timeout = timeouts.get(id)\n    if (timeout) clearTimeout(timeout)\n    timeouts.delete(id)\n    remainingTimes.delete(id)\n    startTimes.delete(id)\n}\n\nexport const pauseToast = (id: string) => {\n    const timeout = timeouts.get(id)\n    const startTime = startTimes.get(id)\n\n    if (!timeout || !startTime) return\n\n    clearTimeout(timeout)\n    timeouts.delete(id)\n\n    const elapsed = Date.now() - startTime\n    const originalDuration = remainingTimes.get(id) || 0\n    remainingTimes.set(id, Math.max(0, originalDuration - elapsed))\n}\n\nexport const resumeToast = (id: string) => {\n    const remaining = remainingTimes.get(id)\n    if (!remaining || remaining <= 0) return\n\n    const toast = state.toasts.find(t => t.id === id)\n    if (!toast) return\n\n    startTimes.set(id, Date.now())\n    const timeout = setTimeout(() => {\n        dismissToast(id)\n        toast.onAutoClose?.()\n    }, remaining)\n    timeouts.set(id, timeout)\n}\n\nconst createToast = (data: Omit<Toast, \"id\">): string => {\n    const id = genId()\n    const toast: Toast = {\n        id,\n        duration: data.type === \"loading\" ? Infinity : state.defaultDuration,\n        type: \"default\",\n        dismissible: true,\n        ...data,\n    }\n\n    if (state.toasts.length >= state.maxToasts) {\n        const oldestId = state.toasts[0].id\n        clearToastTimer(oldestId)\n        state.toasts = state.toasts.slice(1)\n    }\n\n    state.toasts = [...state.toasts, toast]\n\n    if (toast.duration && toast.duration !== Infinity && toast.duration > 0) {\n        remainingTimes.set(id, toast.duration)\n        startTimes.set(id, Date.now())\n        timeouts.set(id, setTimeout(() => {\n            dismissToast(id)\n            toast.onAutoClose?.()\n        }, toast.duration))\n    }\n\n    return id\n}\n\nconst dismissToast = (id: string) => {\n    clearToastTimer(id)\n    state.toasts = state.toasts.filter(t => t.id !== id)\n}\n\nconst updateToast = (id: string, data: Partial<Toast>) => {\n    state.toasts = state.toasts.map(t => t.id === id ? { ...t, ...data } : t)\n\n    if (data.duration !== undefined && data.duration !== Infinity && data.duration > 0) {\n        clearToastTimer(id)\n        remainingTimes.set(id, data.duration)\n        startTimes.set(id, Date.now())\n        timeouts.set(id, setTimeout(() => dismissToast(id), data.duration))\n    }\n}\n\nexport const toast = {\n    show: (data: Omit<Toast, \"id\">) => createToast(data),\n\n    success: (title: string, description?: string) => createToast({ type: \"success\", title, description }),\n\n    error: (title: string, description?: string) => createToast({ type: \"error\", title, description }),\n\n    info: (title: string, description?: string) => createToast({ type: \"info\", title, description }),\n\n    warning: (title: string, description?: string) => createToast({ type: \"warning\", title, description }),\n\n    loading: (title: string, description?: string) => createToast({ type: \"loading\", title, description, duration: Infinity }),\n\n    promise: <T,>(promise: Promise<T>, data: ToastPromiseData): Promise<T> => {\n        const loadingData = typeof data.loading === \"string\" ? { title: data.loading } : data.loading\n        const id = createToast({ type: \"loading\", ...loadingData, promise: true, duration: Infinity })\n\n        promise\n            .then(response => {\n                const successData = typeof data.success === \"function\" ? data.success(response) : data.success\n                const successContent = typeof successData === \"string\" ? { title: successData } : successData\n                updateToast(id, { type: \"success\", ...successContent, duration: state.defaultDuration })\n            })\n            .catch(error => {\n                const errorData = typeof data.error === \"function\" ? data.error(error) : data.error\n                const errorContent = typeof errorData === \"string\" ? { title: errorData } : errorData\n                updateToast(id, { type: \"error\", ...errorContent, duration: state.defaultDuration })\n            })\n\n        return promise\n    },\n\n    dismiss: (id?: string) => id ? dismissToast(id) : (state.toasts = []),\n\n    update: (id: string, data: Partial<Toast>) => updateToast(id, data),\n}\n\nexport default state",
      "type": "registry:lib"
    },
    {
      "path": "registry/shadcn/toast/toast.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X, CheckCircle2, XCircle, Info, AlertTriangle, Loader2, Bell } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\nconst toastVariants = cva(\n    \"group pointer-events-auto relative flex w-full items-center gap-3 overflow-hidden rounded-lg border p-4 pr-8 shadow-lg transition-all min-h-[64px]\",\n    {\n        variants: {\n            variant: {\n                default: \"border-border bg-background text-foreground\",\n                success: \"border-green-500/50 bg-green-50 text-green-900 dark:bg-green-950/50 dark:text-green-100\",\n                error: \"border-red-500/50 bg-red-50 text-red-900 dark:bg-red-950/50 dark:text-red-100\",\n                info: \"border-blue-500/50 bg-blue-50 text-blue-900 dark:bg-blue-950/50 dark:text-blue-100\",\n                warning: \"border-yellow-500/50 bg-yellow-50 text-yellow-900 dark:bg-yellow-950/50 dark:text-yellow-100\",\n                loading: \"border-border bg-background text-foreground\",\n            },\n        },\n        defaultVariants: {\n            variant: \"default\",\n        },\n    }\n)\n\nconst iconVariants = cva(\"h-5 w-5 shrink-0\", {\n    variants: {\n        variant: {\n            default: \"text-foreground\",\n            success: \"text-green-600 dark:text-green-400\",\n            error: \"text-red-600 dark:text-red-400\",\n            info: \"text-blue-600 dark:text-blue-400\",\n            warning: \"text-yellow-600 dark:text-yellow-400\",\n            loading: \"text-muted-foreground animate-spin\",\n        },\n    },\n    defaultVariants: {\n        variant: \"default\",\n    },\n})\n\nconst ICON_MAP = {\n    default: Bell,\n    success: CheckCircle2,\n    error: XCircle,\n    info: Info,\n    warning: AlertTriangle,\n    loading: Loader2,\n} as const\n\nexport interface ToastProps extends React.HTMLAttributes<HTMLDivElement>, VariantProps<typeof toastVariants> {\n    title?: string\n    description?: string\n    onClose?: () => void\n    icon?: React.ReactNode\n    dismissible?: boolean\n}\n\nconst Toast = React.forwardRef<HTMLDivElement, ToastProps>(\n    ({ className, variant, title, description, onClose, icon, dismissible = true, ...props }, ref) => {\n        const IconComponent = ICON_MAP[variant || \"default\"]\n        const displayIcon = icon !== undefined ? icon : IconComponent && <IconComponent className={cn(iconVariants({ variant }))} />\n\n        return (\n            <div ref={ref} className={cn(toastVariants({ variant }), className)} {...props}>\n                <div className=\"shrink-0 flex items-center justify-center w-5 h-5\">\n                    {displayIcon}\n                </div>\n\n                <div className=\"flex-1 min-w-0\">\n                    {title && (\n                        <div className=\"text-sm font-semibold leading-tight tracking-tight truncate\">\n                            {title}\n                        </div>\n                    )}\n                    {description && (\n                        <div className=\"text-sm opacity-90 leading-snug mt-0.5\">\n                            {description}\n                        </div>\n                    )}\n                </div>\n\n                {dismissible && onClose && (\n                    <button\n                        onClick={onClose}\n                        className=\"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100\"\n                    >\n                        <X className=\"h-4 w-4\" />\n                        <span className=\"sr-only\">Close</span>\n                    </button>\n                )}\n            </div>\n        )\n    }\n)\n\nToast.displayName = \"Toast\"\n\nexport { Toast, toastVariants }",
      "type": "registry:component"
    },
    {
      "path": "registry/shadcn/toast/toaster.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { useSnapshot } from \"valtio\"\nimport { AnimatePresence, motion, PanInfo } from \"framer-motion\"\nimport state, { toast as toastStore, type Toast as ToastData, type ToastPosition, pauseToast, resumeToast, setPosition, MAX_TOASTS, DEFAULT_DURATION, setMaxToasts, setDefaultDuration } from \"../lib/toast/store\"\nimport { Toast } from \"./toast\"\n\nexport interface ToasterProps {\n    position?: ToastPosition\n    visibleToasts?: number\n    offset?: number\n    toastWidth?: number\n    swipeThreshold?: number\n    expandOnHover?: boolean\n    hoverEnterDelay?: number\n    hoverLeaveDelay?: number\n    maxToasts?: number\n    defaultDuration?: number\n}\n\nconst DEFAULT_CONFIG = {\n    position: \"bottom-right\" as ToastPosition,\n    visibleToasts: MAX_TOASTS,\n    offset: 16,\n    toastWidth: 356,\n    swipeThreshold: 100,\n    expandOnHover: true,\n    hoverEnterDelay: 100,\n    hoverLeaveDelay: 150,\n    maxToasts: MAX_TOASTS,\n    defaultDuration: DEFAULT_DURATION,\n}\n\nconst POSITION_STYLES: Record<ToastPosition, (offset: number, width: number) => React.CSSProperties> = {\n    \"top-left\": (offset, width) => ({ top: offset, left: offset, width }),\n    \"top-center\": (offset, width) => ({ top: offset, left: \"50%\", width, marginLeft: -(width / 2) }),\n    \"top-right\": (offset, width) => ({ top: offset, right: offset, width }),\n    \"bottom-left\": (offset, width) => ({ bottom: offset, left: offset, width }),\n    \"bottom-center\": (offset, width) => ({ bottom: offset, left: \"50%\", width, marginLeft: -(width / 2) }),\n    \"bottom-right\": (offset, width) => ({ bottom: offset, right: offset, width }),\n}\n\nconst ORIGIN_CLASSES: Record<ToastPosition, string> = {\n    \"top-left\": \"origin-top-left\",\n    \"top-center\": \"origin-top\",\n    \"top-right\": \"origin-top-right\",\n    \"bottom-left\": \"origin-bottom-left\",\n    \"bottom-center\": \"origin-bottom\",\n    \"bottom-right\": \"origin-bottom-right\",\n}\n\ninterface ToastItemProps {\n    toast: ToastData\n    index: number\n    total: number\n    onClose: () => void\n    position: ToastPosition\n    isExpanded: boolean\n    visibleToasts: number\n    toastWidth: number\n    swipeThreshold: number\n}\n\nconst ToastItem = React.memo(({ toast, index, total, onClose, position, isExpanded, visibleToasts, toastWidth, swipeThreshold }: ToastItemProps) => {\n    const isTop = position.startsWith(\"top\")\n    const reverseIndex = total - 1 - index\n    const isVisible = reverseIndex < visibleToasts\n\n    const EXPANDED_GAP = 10\n    const STANDARD_HEIGHT = 64 + EXPANDED_GAP\n    const stackOffset = isExpanded ? reverseIndex * (STANDARD_HEIGHT + EXPANDED_GAP) : reverseIndex * 15\n    const scale = isExpanded ? 1 : 1 - reverseIndex * 0.04\n    const opacity = reverseIndex >= visibleToasts ? 0 : 1\n    const blur = isExpanded ? 0 : reverseIndex > 0 ? reverseIndex * 0.5 : 0\n\n    const handleDragEnd = React.useCallback((_: unknown, info: PanInfo) => {\n        if (Math.abs(info.offset.x) > swipeThreshold) onClose()\n    }, [swipeThreshold, onClose])\n\n    return (\n        <motion.div\n            layout\n            drag=\"x\"\n            dragConstraints={{ left: 0, right: 0 }}\n            dragElastic={0.2}\n            onDragEnd={handleDragEnd}\n            initial={{ opacity: 0, y: isTop ? -100 : 100, scale: 0.9 }}\n            animate={{ opacity, y: isTop ? stackOffset : -stackOffset, scale, filter: `blur(${blur}px)`, zIndex: 1000 - reverseIndex }}\n            exit={{ opacity: 0, x: position.includes(\"right\") ? 100 : position.includes(\"left\") ? -100 : 0, scale: 0.8, transition: { duration: 0.2 } }}\n            transition={{ type: \"spring\", stiffness: 400, damping: 30, mass: 0.8 }}\n            style={{\n                position: \"absolute\",\n                [isTop ? \"top\" : \"bottom\"]: 0,\n                right: position.includes(\"right\") ? 0 : undefined,\n                left: position.includes(\"left\") ? 0 : position.includes(\"center\") ? 0 : undefined,\n                width: toastWidth,\n                pointerEvents: isVisible ? \"auto\" : \"none\",\n            }}\n            className={ORIGIN_CLASSES[position]}\n        >\n            <Toast\n                variant={toast.type}\n                title={toast.title}\n                description={toast.description}\n                onClose={onClose}\n                icon={toast.icon as React.ReactNode}\n                dismissible={toast.dismissible}\n            />\n        </motion.div>\n    )\n})\n\nToastItem.displayName = \"ToastItem\"\n\nexport function Toaster({\n    position: defaultPosition = DEFAULT_CONFIG.position,\n    visibleToasts = DEFAULT_CONFIG.visibleToasts,\n    offset = DEFAULT_CONFIG.offset,\n    toastWidth = DEFAULT_CONFIG.toastWidth,\n    swipeThreshold = DEFAULT_CONFIG.swipeThreshold,\n    expandOnHover = DEFAULT_CONFIG.expandOnHover,\n    hoverEnterDelay = DEFAULT_CONFIG.hoverEnterDelay,\n    hoverLeaveDelay = DEFAULT_CONFIG.hoverLeaveDelay,\n    maxToasts = DEFAULT_CONFIG.maxToasts,\n    defaultDuration = DEFAULT_CONFIG.defaultDuration,\n}: ToasterProps = {}) {\n    const snap = useSnapshot(state)\n    const position = snap.position || defaultPosition\n    const [isExpanded, setIsExpanded] = React.useState(false)\n    const hoverTimeoutRef = React.useRef<NodeJS.Timeout | null>(null)\n    const leaveTimeoutRef = React.useRef<NodeJS.Timeout | null>(null)\n\n    React.useEffect(() => {\n        setPosition(defaultPosition)\n        setMaxToasts(maxToasts)\n        setDefaultDuration(defaultDuration)\n    }, [defaultPosition, maxToasts, defaultDuration])\n\n    const handleMouseEnter = React.useCallback(() => {\n        if (!expandOnHover) return\n\n        if (leaveTimeoutRef.current) {\n            clearTimeout(leaveTimeoutRef.current)\n            leaveTimeoutRef.current = null\n        }\n\n        if (hoverTimeoutRef.current) clearTimeout(hoverTimeoutRef.current)\n\n        hoverTimeoutRef.current = setTimeout(() => {\n            setIsExpanded(true)\n            snap.toasts.forEach(t => pauseToast(t.id))\n        }, hoverEnterDelay)\n    }, [expandOnHover, hoverEnterDelay, snap.toasts])\n\n    const handleMouseLeave = React.useCallback(() => {\n        if (!expandOnHover) return\n\n        if (hoverTimeoutRef.current) {\n            clearTimeout(hoverTimeoutRef.current)\n            hoverTimeoutRef.current = null\n        }\n\n        leaveTimeoutRef.current = setTimeout(() => {\n            setIsExpanded(false)\n            snap.toasts.forEach(t => resumeToast(t.id))\n        }, hoverLeaveDelay)\n    }, [expandOnHover, hoverLeaveDelay, snap.toasts])\n\n    React.useEffect(() => {\n        return () => {\n            if (hoverTimeoutRef.current) clearTimeout(hoverTimeoutRef.current)\n            if (leaveTimeoutRef.current) clearTimeout(leaveTimeoutRef.current)\n        }\n    }, [])\n\n    const positionStyles = React.useMemo(() => ({\n        ...POSITION_STYLES[position](offset, toastWidth),\n        position: \"fixed\" as const,\n        pointerEvents: \"none\" as const,\n        zIndex: 100,\n        padding: '10px',\n        margin: '-10px',\n    }), [position, offset, toastWidth])\n\n    return (\n        <div\n            className=\"fixed\"\n            style={positionStyles}\n            onMouseEnter={handleMouseEnter}\n            onMouseLeave={handleMouseLeave}\n        >\n            <div className=\"relative\" style={{ pointerEvents: \"auto\" }}>\n                <AnimatePresence mode=\"popLayout\">\n                    {snap.toasts.map((t, index) => (\n                        <ToastItem\n                            key={t.id}\n                            toast={{\n                                id: t.id,\n                                title: t.title,\n                                description: t.description,\n                                type: t.type,\n                                duration: t.duration,\n                                promise: t.promise,\n                                onAutoClose: t.onAutoClose,\n                                dismissible: t.dismissible,\n                                icon: t.icon as React.ReactNode,\n                                position: t.position,\n                            }}\n                            index={index}\n                            total={snap.toasts.length}\n                            onClose={() => toastStore.dismiss(t.id)}\n                            position={t.position || position}\n                            isExpanded={isExpanded}\n                            visibleToasts={visibleToasts}\n                            toastWidth={toastWidth}\n                            swipeThreshold={swipeThreshold}\n                        />\n                    ))}\n                </AnimatePresence>\n            </div>\n        </div>\n    )\n}\n",
      "type": "registry:component"
    }
  ]
}